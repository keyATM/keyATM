<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FAQ • keyATM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="FAQ">
<meta property="og:description" content="keyATM">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">keyATM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    User's Guide
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown_files/Installation.html">Installation</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Preparation.html">Preparation</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/keyATM_base.html">keyATM Base</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/keyATM_cov.html">keyATM Covariates</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/keyATM_dynamic.html">keyATM Dynamic</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Weighted_LDA.html">Weighted LDA</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Resume.html">Resume Fitting</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Plot.html">Plot Customization</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Options.html">Options</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../articles/pkgdown_files/FAQ.html">FAQ</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/keyATM/keyATM" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>FAQ</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/keyATM/keyATM/blob/HEAD/vignettes/pkgdown_files/FAQ.Rmd" class="external-link"><code>vignettes/pkgdown_files/FAQ.Rmd</code></a></small>
      <div class="hidden name"><code>FAQ.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="model">Model<a class="anchor" aria-label="anchor" href="#model"></a>
</h2>
<div class="section level3">
<h3 id="which-model-to-use">Which model to use?<a class="anchor" aria-label="anchor" href="#which-model-to-use"></a>
</h3>
<p>The table below summarizes keyATM models and other popular models
based on the inputs.</p>
<table class="table">
<colgroup>
<col width="47%">
<col width="14%">
<col width="16%">
<col width="21%">
</colgroup>
<thead><tr class="header">
<th align="right"></th>
<th align="center">Keywords</th>
<th align="center">Covariate</th>
<th align="center">Time Structure</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right"><a href="keyATM_base.html">keyATM Base</a></td>
<td align="center">○</td>
<td align="center">×</td>
<td align="center">×</td>
</tr>
<tr class="even">
<td align="right"><a href="keyATM_cov.html">keyATM Covariate</a></td>
<td align="center">○</td>
<td align="center">○</td>
<td align="center">△</td>
</tr>
<tr class="odd">
<td align="right"><a href="keyATM_dynamic.html">keyATM Dynamic</a></td>
<td align="center">○</td>
<td align="center">×</td>
<td align="center">○</td>
</tr>
<tr class="even">
<td align="right">LDA Weighted</td>
<td align="center">×</td>
<td align="center">×</td>
<td align="center">×</td>
</tr>
<tr class="odd">
<td align="right">LDA Weighted Cov</td>
<td align="center">×</td>
<td align="center">○</td>
<td align="center">×</td>
</tr>
<tr class="even">
<td align="right">LDA Weighted HMM</td>
<td align="center">×</td>
<td align="center">×</td>
<td align="center">○</td>
</tr>
<tr class="odd">
<td align="right">Latent Dirichlet Allocation (LDA)</td>
<td align="center">×</td>
<td align="center">×</td>
<td align="center">×</td>
</tr>
<tr class="even">
<td align="right">Structural Topic Model (STM)</td>
<td align="center">×</td>
<td align="center">○</td>
<td align="center">△</td>
</tr>
</tbody>
</table>
<p>(○: model incorporates the feature, ×: model does not incorporate the
feature, △: model can handle the feature but with some limitations)</p>
<p>The next table compares inference methods and speeds. CGS stands for
Collapsed Gibbs Sampling and SS stands for Slice Sampling. Variational
inference approximates the target distribution, while CGS and SS sample
from the exact distribution.</p>
<table class="table">
<colgroup>
<col width="35%">
<col width="23%">
<col width="40%">
</colgroup>
<thead><tr class="header">
<th align="right"></th>
<th align="left">Inference</th>
<th align="left">Speed</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right"><a href="keyATM_base.html">keyATM Base</a></td>
<td align="left">CGS + SS</td>
<td align="left">Fast</td>
</tr>
<tr class="even">
<td align="right"><a href="keyATM_cov.html">keyATM Covariate</a></td>
<td align="left">CGS + SS / PG</td>
<td align="left">Moderate (Depends on # of covariates)</td>
</tr>
<tr class="odd">
<td align="right"><a href="keyATM_dynamic.html">keyATM Dynamic</a></td>
<td align="left">CGS + SS</td>
<td align="left">Fast</td>
</tr>
<tr class="even">
<td align="right">LDA Weighted</td>
<td align="left">CGS + SS</td>
<td align="left">Fast</td>
</tr>
<tr class="odd">
<td align="right">LDA Weighted Cov</td>
<td align="left">CGS + SS</td>
<td align="left">Moderate (Depends on # of covariates)</td>
</tr>
<tr class="even">
<td align="right">LDA Weighted HMM</td>
<td align="left">CGS + SS</td>
<td align="left">Fast</td>
</tr>
<tr class="odd">
<td align="right">Latent Dirichlet Allocation (LDA)</td>
<td align="left">Variational EM / CGS</td>
<td align="left">Depends on implementation</td>
</tr>
<tr class="even">
<td align="right">Structural Topic Model (STM)</td>
<td align="left">Variational EM</td>
<td align="left">Very Fast</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="preprocessing">Preprocessing<a class="anchor" aria-label="anchor" href="#preprocessing"></a>
</h2>
<div class="section level3">
<h3 id="can-we-use-n-grams">Can we use n-grams?<a class="anchor" aria-label="anchor" href="#can-we-use-n-grams"></a>
</h3>
<p>Yes, but you need an extra step in the preprocessing. Let’s try a
bigram model. You need a tokens object (see <a href="Preparation.html">Preparation</a>). Then,
<strong>quanteda</strong> will create a n-gram tokens object (see <a href="https://tutorials.quanteda.io/basic-operations/tokens/tokens_ngrams/" class="external-link">quanteda’s
manual</a> for details),</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_tokens_n2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/tokens_ngrams.html" class="external-link">tokens_ngrams</a></span><span class="op">(</span><span class="va">data_tokens</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>  <span class="co"># bigram</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_tokens_n2</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "fellow-citizens_senate" "senate_house"           "house_representatives"</span></span></code></pre>
<p>You can pass this preprocessed object to <strong>keyATM</strong> just
as the unigram model.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_dfm_n2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dfm.html" class="external-link">dfm</a></span><span class="op">(</span><span class="va">data_tokens_n2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>                 <span class="fu"><a href="https://quanteda.io/reference/dfm_trim.html" class="external-link">dfm_trim</a></span><span class="op">(</span>min_termfreq <span class="op">=</span> <span class="fl">3</span>, min_docfreq <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">keyATM_docs_n2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/keyATM_read.html">keyATM_read</a></span><span class="op">(</span><span class="va">data_dfm_n2</span><span class="op">)</span></span></code></pre></div>
<p>Keywords should respect the n-gram.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">keywords_n2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Government <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"federal_government"</span>, <span class="st">"vice_president"</span><span class="op">)</span>,</span>
<span>                    People     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"men_women"</span>, <span class="st">"fellow_citizens"</span><span class="op">)</span>,</span>
<span>                    Peace      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"peace_world"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Then, you can fit the keyATM models (here we use <a href="keyATM_base.html">the base</a> model).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/keyATM.html">keyATM</a></span><span class="op">(</span>docs              <span class="op">=</span> <span class="va">keyATM_docs_n2</span>,    <span class="co"># text input</span></span>
<span>              no_keyword_topics <span class="op">=</span> <span class="fl">3</span>,                 <span class="co"># number of topics without keywords</span></span>
<span>              keywords          <span class="op">=</span> <span class="va">keywords_n2</span>,       <span class="co"># keywords</span></span>
<span>              model             <span class="op">=</span> <span class="st">"base"</span>,            <span class="co"># select the model</span></span>
<span>              options           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="fl">250</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../../reference/top_words.html">top_words</a></span><span class="op">(</span><span class="va">out</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##             1_Government            2_People           3_Peace</span></span>
<span><span class="co">## 1 federal_government [✓] fellow_citizens [✓]        four_years</span></span>
<span><span class="co">## 2     vice_president [✓]       united_states         years_ago</span></span>
<span><span class="co">## 3            one_another     american_people political_parties</span></span>
<span><span class="co">## 4             good_faith       men_women [✓]   foreign_nations</span></span>
<span><span class="co">## 5            oath_office       people_united         old_world</span></span>
<span><span class="co">##               Other_1           Other_2                   Other_3</span></span>
<span><span class="co">## 1  general_government government_people             united_states</span></span>
<span><span class="co">## 2 constitution_united     among_nations              among_people</span></span>
<span><span class="co">## 3         public_debt         god_bless administration_government</span></span>
<span><span class="co">## 4   constitution_laws     nations_world             within_limits</span></span>
<span><span class="co">## 5     free_government      great_nation          chief_magistrate</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="keywords">Keywords<a class="anchor" aria-label="anchor" href="#keywords"></a>
</h2>
<div class="section level3">
<h3 id="can-we-use-a-wildcard-character-in-keywords-list">Can we use a wildcard character in keywords list?<a class="anchor" aria-label="anchor" href="#can-we-use-a-wildcard-character-in-keywords-list"></a>
</h3>
<p>We can use the <code><a href="https://quanteda.io/reference/dfm_select.html" class="external-link">dfm_select()</a></code> function from the
<strong>quanteda</strong> package.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">keyATM_docs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/keyATM_read.html">keyATM_read</a></span><span class="op">(</span>texts <span class="op">=</span> <span class="va">data_dfm</span><span class="op">)</span></span>
<span></span>
<span><span class="va">law_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="fu"><a href="https://quanteda.io/reference/dfm_select.html" class="external-link">dfm_select</a></span><span class="op">(</span><span class="va">data_dfm</span>, pattern <span class="op">=</span> <span class="st">"law*"</span><span class="op">)</span><span class="op">)</span>  <span class="co"># terms start with `law`</span></span>
<span><span class="va">keywords</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  Government     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">law_all</span>, <span class="st">"executive"</span><span class="op">)</span>,</span>
<span>  Constitution   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"constitution"</span>, <span class="st">"rights"</span><span class="op">)</span>,</span>
<span>  ForeignAffairs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"foreign"</span>, <span class="st">"war"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Please also consider the <code><a href="../../reference/read_keywords.html">read_keywords()</a></code> function to
read a dictionary object from quanteda to a named list.</p>
</div>
</div>
<div class="section level2">
<h2 id="fitting">Fitting<a class="anchor" aria-label="anchor" href="#fitting"></a>
</h2>
<div class="section level3">
<h3 id="it-takes-time-to-fit-the-model--what-should-i-do">It takes time to fit the model. What should I do?<a class="anchor" aria-label="anchor" href="#it-takes-time-to-fit-the-model--what-should-i-do"></a>
</h3>
<p>Please note that the number of unique words, the total lenght of
documents, and the number of topics affect the speed. If you use
<code>cov</code> model, the number of covariates matters as well,
because we need to estimate coefficieitns for covariates.</p>
<p>If you want to speed up fitting, the first thing you can do is to
review preprocessing processes. Usually, documents include a lot of low
frequency words that do not help interpretation.
<strong>quanteda</strong> provides various functions to trim those
words.</p>
<p><strong>keyATM</strong> can <a href="Resume.html">resume
fittng</a>.</p>
</div>
<div class="section level3">
<h3 id="can-i-run-keyatm-on-cloud-computing-services">Can I run keyATM on cloud computing services?<a class="anchor" aria-label="anchor" href="#can-i-run-keyatm-on-cloud-computing-services"></a>
</h3>
<p>Yes! For example, <a href="http://www.louisaslett.com/" class="external-link">Professor
Louis Aslett</a> provides an easy to use Amazon Machine Image of RStudio
<a href="http://www.louisaslett.com/RStudio_AMI/" class="external-link">here</a>. When you
select an instance, please note that <strong>keyATM</strong> does not
need multiple cores (one or two cores would be enough because we cannot
parallelize Collapsed Gibbs Sampling), but make sure the memory can
handle your data.</p>
</div>
<div class="section level3">
<h3 id="can-a-theta-matrix-stored-with-store_theta-to-true-directly-interpretable-as-samples-from-the-posterior-and-thus-appropriate-for-estimating-uncertainty">Can a theta matrix stored with <code>store_theta</code> to
<code>TRUE</code> directly interpretable as samples from the posterior
and thus appropriate for estimating uncertainty?<a class="anchor" aria-label="anchor" href="#can-a-theta-matrix-stored-with-store_theta-to-true-directly-interpretable-as-samples-from-the-posterior-and-thus-appropriate-for-estimating-uncertainty"></a>
</h3>
<p>Yes. Since we use Collapsed Gibbs sampling, thetas are not sampled
directly from the posterior distribution. <code>store_theta</code>
option calculates marginal posterior (Equation 11 in <a href="https://arxiv.org/pdf/2004.05964.pdf" class="external-link">our paper</a>) for each
iteration, so we can use it to consider uncertainty.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://shusei-e.github.io" class="external-link">Shusei Eshima</a>, <a href="https://tomoya-sasaki.github.io/" class="external-link">Tomoya Sasaki</a>, <a href="https://imai.fas.harvard.edu/" class="external-link">Kosuke Imai</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
