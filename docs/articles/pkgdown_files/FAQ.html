<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FAQ • keyATM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="FAQ">
<meta property="og:description" content="keyATM">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">keyATM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    User's Guide
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown_files/Installation.html">Installation</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Preparation.html">Preparation</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/keyATM_base.html">keyATM Base</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/keyATM_cov.html">keyATM Covariates</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/keyATM_dynamic.html">keyATM Dynamic</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/keyATM_label.html">keyATM Label</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Weighted_LDA.html">Weighted LDA</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Options.html">Options</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../articles/pkgdown_files/FAQ.html">FAQ</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/keyATM/keyATM">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>FAQ</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/keyATM/keyATM/blob/master/vignettes/pkgdown_files/FAQ.Rmd"><code>vignettes/pkgdown_files/FAQ.Rmd</code></a></small>
      <div class="hidden name"><code>FAQ.Rmd</code></div>

    </div>

    
    
<div id="model" class="section level1">
<h1 class="hasAnchor">
<a href="#model" class="anchor"></a>Model</h1>
<div id="which-model-to-use" class="section level2">
<h2 class="hasAnchor">
<a href="#which-model-to-use" class="anchor"></a>Which model to use?</h2>
<p>The table below summarizes keyATM models and other popular models based on the inputs.</p>
<table class="table">
<thead><tr class="header">
<th align="right"></th>
<th align="center">Keywords</th>
<th align="center">Covariate</th>
<th align="center">Time Structure</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right"><a href="keyATM_base.html">keyATM Base</a></td>
<td align="center">○</td>
<td align="center">×</td>
<td align="center">×</td>
</tr>
<tr class="even">
<td align="right"><a href="keyATM_cov.html">keyATM Covariate</a></td>
<td align="center">○</td>
<td align="center">○</td>
<td align="center">△</td>
</tr>
<tr class="odd">
<td align="right"><a href="keyATM_hmm.html">keyATM HMM</a></td>
<td align="center">○</td>
<td align="center">×</td>
<td align="center">○</td>
</tr>
<tr class="even">
<td align="right"><a href="keyATM_label.html">keyATM Label</a></td>
<td align="center">○</td>
<td align="center">×</td>
<td align="center">×</td>
</tr>
<tr class="odd">
<td align="right">LDA Weighted</td>
<td align="center">×</td>
<td align="center">×</td>
<td align="center">×</td>
</tr>
<tr class="even">
<td align="right">LDA Weighted Cov</td>
<td align="center">×</td>
<td align="center">○</td>
<td align="center">×</td>
</tr>
<tr class="odd">
<td align="right">LDA Weighted HMM</td>
<td align="center">×</td>
<td align="center">×</td>
<td align="center">○</td>
</tr>
<tr class="even">
<td align="right">Latent Dirichlet Allocation (LDA)</td>
<td align="center">×</td>
<td align="center">×</td>
<td align="center">×</td>
</tr>
<tr class="odd">
<td align="right">Structural Topic Model (STM)</td>
<td align="center">×</td>
<td align="center">○</td>
<td align="center">△</td>
</tr>
</tbody>
</table>
<p>(○: model incorporates the feature, ×: model does not incorporate the feature, △: model can handle the feature but with some limitations)</p>
<p>The next table compares inference methods and speeds. CGS stands for Collapsed Gibbs Sampling and SS stands for Slice Sampling. Variational inference approximates the target distribution, while CGS and SS sample from the exact distribution.</p>
<table class="table">
<colgroup>
<col width="35%">
<col width="23%">
<col width="40%">
</colgroup>
<thead><tr class="header">
<th align="right"></th>
<th align="left">Inference</th>
<th align="left">Speed</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right"><a href="keyATM_base.html">keyATM Base</a></td>
<td align="left">CGS + SS</td>
<td align="left">Fast</td>
</tr>
<tr class="even">
<td align="right"><a href="keyATM_cov.html">keyATM Covariate</a></td>
<td align="left">CGS + SS</td>
<td align="left">Moderate (Depends on # of covariates)</td>
</tr>
<tr class="odd">
<td align="right"><a href="keyATM_hmm.html">keyATM HMM</a></td>
<td align="left">CGS + SS</td>
<td align="left">Fast</td>
</tr>
<tr class="even">
<td align="right"><a href="keyATM_label.html">keyATM Label</a></td>
<td align="left">CGS + SS</td>
<td align="left">Fast</td>
</tr>
<tr class="odd">
<td align="right">LDA Weighted</td>
<td align="left">CGS + SS</td>
<td align="left">Fast</td>
</tr>
<tr class="even">
<td align="right">LDA Weighted Cov</td>
<td align="left">CGS + SS</td>
<td align="left">Moderate (Depends on # of covariates)</td>
</tr>
<tr class="odd">
<td align="right">LDA Weighted HMM</td>
<td align="left">CGS + SS</td>
<td align="left">Fast</td>
</tr>
<tr class="even">
<td align="right">Latent Dirichlet Allocation (LDA)</td>
<td align="left">Variational EM / CGS</td>
<td align="left">Depends on implementation</td>
</tr>
<tr class="odd">
<td align="right">Structural Topic Model (STM)</td>
<td align="left">Variational EM</td>
<td align="left">Very Fast</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="preprocessing" class="section level1">
<h1 class="hasAnchor">
<a href="#preprocessing" class="anchor"></a>Preprocessing</h1>
<div id="can-we-use-n-grams" class="section level2">
<h2 class="hasAnchor">
<a href="#can-we-use-n-grams" class="anchor"></a>Can we use n-grams?</h2>
<p>Yes, but you need an extra step in the preprocessing. Let’s try a bigram model. You need a tokens object (see <a href="Preparation.html">Preparation</a>). Then, <strong>quanteda</strong> will create a n-gram tokens object (see <a href="https://tutorials.quanteda.io/basic-operations/tokens/tokens_ngrams/">quanteda’s manual</a> for details),</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="no">data_tokens_n2</span> <span class="kw">&lt;-</span> <span class="fu">tokens_ngrams</span>(<span class="no">data_tokens</span>, <span class="kw">n</span> <span class="kw">=</span> <span class="fl">2</span>)  <span class="co"># bigram</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">data_tokens_n2</span><span class="kw">[[</span><span class="fl">1</span>]], <span class="fl">3</span>)</pre></body></html></div>
<pre><code>## [1] "fellow-citizens_senate" "senate_house"           "house_representatives"</code></pre>
<p>You can pass this preprocessed object to <strong>keyATM</strong> just as the unigram model.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">data_dfm_n2</span> <span class="kw">&lt;-</span> <span class="fu">dfm</span>(<span class="no">data_tokens_n2</span>) <span class="kw">%&gt;%</span>
                 <span class="fu">dfm_trim</span>(<span class="kw">min_termfreq</span> <span class="kw">=</span> <span class="fl">3</span>, <span class="kw">min_docfreq</span> <span class="kw">=</span> <span class="fl">2</span>)
<span class="no">keyATM_docs_n2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/keyATM_read.html">keyATM_read</a></span>(<span class="no">data_dfm_n2</span>)</pre></body></html></div>
<p>Keywords should respect the n-gram.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">keywords_n2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">Government</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"federal_government"</span>, <span class="st">"vice_president"</span>),
                    <span class="kw">People</span>     <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"men_women"</span>, <span class="st">"fellow_citizens"</span>),
                    <span class="kw">Peace</span>      <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"peace_world"</span>))</pre></body></html></div>
<p>Then, you can fit the keyATM models (here we use <a href="(keyATM_base.html)%20model">the base</a>.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">out</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../../reference/keyATM.html">keyATM</a></span>(<span class="kw">docs</span>              <span class="kw">=</span> <span class="no">keyATM_docs_n2</span>,    <span class="co"># text input</span>
              <span class="kw">no_keyword_topics</span> <span class="kw">=</span> <span class="fl">3</span>,                 <span class="co"># number of topics without keywords</span>
              <span class="kw">keywords</span>          <span class="kw">=</span> <span class="no">keywords_n2</span>,       <span class="co"># keywords</span>
              <span class="kw">model</span>             <span class="kw">=</span> <span class="st">"base"</span>,            <span class="co"># select the model</span>
              <span class="kw">options</span>           <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">seed</span> <span class="kw">=</span> <span class="fl">250</span>))
<span class="fu"><a href="../../reference/top_words.html">top_words</a></span>(<span class="no">out</span>, <span class="fl">5</span>)</pre></body></html></div>
<pre><code>##         1_Government            2_People           3_Peace
## 1      men_women [2] fellow_citizens [✓]        four_years
## 2 vice_president [✓]       united_states government_people
## 3          god_bless     american_people     among_nations
## 4      chief_justice        great_nation   foreign_nations
## 5          years_ago         one_another         years_ago
##                  Other_1                Other_2                   Other_3
## 1    constitution_united federal_government [1]             united_states
## 2            free_people           almighty_god        general_government
## 3 federal_government [1]          national_life             every_citizen
## 4      constitution_laws      political_parties              among_people
## 5           public_money       throughout_world administration_government</code></pre>
</div>
</div>
<div id="fitting" class="section level1">
<h1 class="hasAnchor">
<a href="#fitting" class="anchor"></a>Fitting</h1>
<div id="it-takes-time-to-fit-the-model--what-should-i-do" class="section level2">
<h2 class="hasAnchor">
<a href="#it-takes-time-to-fit-the-model--what-should-i-do" class="anchor"></a>It takes time to fit the model. What should I do?</h2>
<p>Please note that the number of unique words, the total lenght of documents, and the number of topics affect the speed. If you use <code>cov</code> model, the number of covariates matters as well, because we need to estimate coefficieitns for covariates.</p>
<p>If you want to speed up fitting, the first thing you can do is to review preprocessing processes. Usually, documents include a lot of low frequency words that do not help interpretation. <strong>quanteda</strong> provides various functions to trim those words.</p>
</div>
<div id="can-i-run-keyatm-on-cloud-computing-services" class="section level2">
<h2 class="hasAnchor">
<a href="#can-i-run-keyatm-on-cloud-computing-services" class="anchor"></a>Can I run keyATM on cloud computing services?</h2>
<p>Yes! For example, <a href="http://www.louisaslett.com/">Professor Louis Aslett</a> provides an easy to use Amazon Machine Image of RStudio <a href="http://www.louisaslett.com/RStudio_AMI/">here</a>. When you select an instance, please note that <strong>keyATM</strong> does not need multiple cores (one or two cores would be enough because we cannot parallelize Collapsed Gibbs Sampling), but make sure the memory can handle your data.</p>
</div>
<div id="can-a-theta-matrix-stored-with-store_theta-to-true-directly-interpretable-as-samples-from-the-posterior-and-thus-appropriate-for-estimating-uncertainty" class="section level2">
<h2 class="hasAnchor">
<a href="#can-a-theta-matrix-stored-with-store_theta-to-true-directly-interpretable-as-samples-from-the-posterior-and-thus-appropriate-for-estimating-uncertainty" class="anchor"></a>Can a theta matrix stored with <code>store_theta</code> to <code>TRUE</code> directly interpretable as samples from the posterior and thus appropriate for estimating uncertainty?</h2>
<p>Yes. Since we use Collapsed Gibbs sampling, thetas are not sampled directly from the posterior distribution. <code>store_theta</code> option calculates marginal posterior (Equation 11 in <a href="https://arxiv.org/pdf/2004.05964.pdf">our paper</a>) for each iteration, so we can use it to consider uncertainty.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://shusei-e.github.io">Shusei Eshima</a>, <a href="https://polisci.mit.edu/people/tomoya-sasaki">Tomoya Sasaki</a>, <a href="https://imai.fas.harvard.edu/">Kosuke Imai</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
