<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>keyATM Base • keyATM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="keyATM Base">
<meta property="og:description" content="keyATM">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">keyATM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    User's Guide
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown_files/Installation.html">Installation</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Preparation.html">Preparation</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/keyATM_base.html">keyATM Base</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/keyATM_cov.html">keyATM Covariates</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/keyATM_dynamic.html">keyATM Dynamic</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Weighted_LDA.html">Weighted LDA</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Resume.html">Resume Fitting</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Plot.html">Plot Customization</a>
    </li>
    <li>
      <a href="../../articles/pkgdown_files/Options.html">Options</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../articles/pkgdown_files/FAQ.html">FAQ</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/keyATM/keyATM" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>keyATM Base</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/keyATM/keyATM/blob/HEAD/vignettes/pkgdown_files/keyATM_base.Rmd" class="external-link"><code>vignettes/pkgdown_files/keyATM_base.Rmd</code></a></small>
      <div class="hidden name"><code>keyATM_base.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="preparing-documents-and-keywords">Preparing documents and keywords<a class="anchor" aria-label="anchor" href="#preparing-documents-and-keywords"></a>
</h2>
<p>Please read <a href="Preparation.html">Preparation</a> for the
reading of documents and creating a list of keywords. We use the US
Presidential inaugural address data we prapared (<a href="Preparation.html#preparing-texts">documents</a> and <a href="Preparation.html#preparing-keywords">keywords</a>).</p>
</div>
<div class="section level2">
<h2 id="fitting-the-model">Fitting the model<a class="anchor" aria-label="anchor" href="#fitting-the-model"></a>
</h2>
<p>We pass the output of the <code>keyATM_read</code> function and
keywords to the <code>keyATM</code> function.</p>
<p>Additionally, we need to specify the number of topics without
keywords (the <code>no_keyword_topics</code> argument) and model. Since
this example does not use covariates or time stamps, <code>base</code>
is the appropriate model.</p>
<p>To guarantee the replicability, we recommend to set the random seed
in the <code>option</code> argument (see <a href="Options.html">here</a>
for other options). The default number of iterations is 1,500.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/keyATM.html">keyATM</a></span><span class="op">(</span></span>
<span>  docs              <span class="op">=</span> <span class="va">keyATM_docs</span>,    <span class="co"># text input</span></span>
<span>  no_keyword_topics <span class="op">=</span> <span class="fl">5</span>,              <span class="co"># number of topics without keywords</span></span>
<span>  keywords          <span class="op">=</span> <span class="va">keywords</span>,       <span class="co"># keywords</span></span>
<span>  model             <span class="op">=</span> <span class="st">"base"</span>,         <span class="co"># select the model</span></span>
<span>  options           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="fl">250</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The default number of iterations is <code>1500</code>. Please check
<a href="Options.html">this page</a> for available options.</p>
<p>You can <a href="Resume.html">resume</a> the iteration by specifying
the <code>resume</code> argument.</p>
</div>
<div class="section level2">
<h2 id="saving-the-model">Saving the model<a class="anchor" aria-label="anchor" href="#saving-the-model"></a>
</h2>
<p>Once you fit the model, you can save the model with the
<code><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS()</a></code> function for replication. We strongly recommend
to save the fitted model.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">out</span>, file <span class="op">=</span> <span class="st">"SAVENAME.rds"</span><span class="op">)</span></span></code></pre></div>
<p>To load the model, you can use <code><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS()</a></code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"SAVENAME.rds"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="interpreting-results">Interpreting results<a class="anchor" aria-label="anchor" href="#interpreting-results"></a>
</h2>
<p>There are two main quantities of interest in topic models. First,
topic-word distribution represents the relative frequency of words for
each topics, characterizing the topic content. Second, document-topic
distribution represents the proportions of topics for each document,
reflecting the main themes of the document and often called topic
prevalence.</p>
<p>Since typical corpus contains several thousands of unique terms, we
usually scrutinize ten to fifteen words that have high probabilities in
a given topic, which is called top words of a topic.</p>
<p>The <code><a href="../../reference/top_words.html">top_words()</a></code> function returns a table of top words
for each of estimated topics. Keywords assigned to a keyword topic are
suffixed with a check mark. Keywords from another keyword topic are
labeled with the topic id of that category.</p>
<p>In the table below, “law”, “laws”, and “executive” are keywords of
the <em>Government</em> topic, while “peace” appears in top words of the
<em>Other_3</em> topic, it is a keyword of the <em>peace</em> topic.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/top_words.html">top_words</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##     1_Government   2_Congress     3_Peace   4_Constitution 5_ForeignAffairs</span></span>
<span><span class="co">## 1          great      country   world [✓]           states       government</span></span>
<span><span class="co">## 2            one     national         new constitution [✓]            union</span></span>
<span><span class="co">## 3       american congress [✓]     america            great          war [✓]</span></span>
<span><span class="co">## 4     government         made      nation            power           united</span></span>
<span><span class="co">## 5           make       policy         let       rights [✓]           public</span></span>
<span><span class="co">## 6       laws [✓]         best   peace [✓]          nations        interests</span></span>
<span><span class="co">## 7        law [✓]         duty freedom [✓]   administration            state</span></span>
<span><span class="co">## 8           hope    party [✓]        work            whole      foreign [✓]</span></span>
<span><span class="co">## 9       citizens       office        know     institutions           powers</span></span>
<span><span class="co">## 10 executive [✓]        order        life        necessary       principles</span></span>
<span><span class="co">##       Other_1   Other_2 Other_3   Other_4 Other_5</span></span>
<span><span class="co">## 1  government   justice  people    spirit    free</span></span>
<span><span class="co">## 2   peace [3]      much     now    nation   first</span></span>
<span><span class="co">## 3     support       men   every      well    long</span></span>
<span><span class="co">## 4      public    system    time  citizens     man</span></span>
<span><span class="co">## 5   political      part   years       one   power</span></span>
<span><span class="co">## 6        good      many    just      high     yet</span></span>
<span><span class="co">## 7     federal     force   among     trust  others</span></span>
<span><span class="co">## 8  prosperity    action  future character   means</span></span>
<span><span class="co">## 9      secure important    ever     since    even</span></span>
<span><span class="co">## 10     proper resources   equal     honor  change</span></span></code></pre>
<p>Researchers can also examine how likely each topic appears in the
corpus with <code><a href="../../reference/plot_topicprop.html">plot_topicprop()</a></code>. This function creates a
figure that shows the expected proportions of the corpus belonging to
each estimated topic along with the top three words associated with the
topic. The figure below demonstrates that the ``Peace’’ topic is most
likely to appear in the corpus.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/plot_topicprop.html">plot_topicprop</a></span><span class="op">(</span><span class="va">out</span>, show_topic <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p><img src="keyATM_base_files/figure-html/unnamed-chunk-6-1.png" width="700" style="display: block; margin: auto;"></p>
<p>To explore documents that are highly associated with each topic, the
<code><a href="../../reference/top_docs.html">top_docs()</a></code> function returns a table of document indexes in
which a topic has high proportion.</p>
<p>The table below indicates, for example, that the ninth document in
the corpus has the highest proportion of the <em>Government</em> topic
among all other documents.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/top_docs.html">top_docs</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    1_Government 2_Congress 3_Peace 4_Constitution 5_ForeignAffairs Other_1</span></span>
<span><span class="co">## 1            58         28      46             19               16      31</span></span>
<span><span class="co">## 2            53         21      53             18               10      36</span></span>
<span><span class="co">## 3            32         22      47             23               11      27</span></span>
<span><span class="co">## 4            55         29      52             15               12      26</span></span>
<span><span class="co">## 5            54         37      50              9               15      25</span></span>
<span><span class="co">## 6            51         34      54             14                8       2</span></span>
<span><span class="co">## 7            52         31      51             24                7      28</span></span>
<span><span class="co">## 8            57         23      55             12                1      23</span></span>
<span><span class="co">## 9            45         25      44             17               13      24</span></span>
<span><span class="co">## 10           50         26      57              6                5      35</span></span>
<span><span class="co">##    Other_2 Other_3 Other_4 Other_5</span></span>
<span><span class="co">## 1       41      47      14      44</span></span>
<span><span class="co">## 2       30      20       6      43</span></span>
<span><span class="co">## 3       35      21       3      45</span></span>
<span><span class="co">## 4       32      57       1      48</span></span>
<span><span class="co">## 5       37       2      17      56</span></span>
<span><span class="co">## 6       36      45      39      42</span></span>
<span><span class="co">## 7       33      48       4      51</span></span>
<span><span class="co">## 8       31      50      32      52</span></span>
<span><span class="co">## 9       29      46       2      49</span></span>
<span><span class="co">## 10       8      53       7      40</span></span></code></pre>
<p>Researchers may want to obtain the entire document-topic distribution
and topic-word distribution. The output of the <code><a href="../../reference/keyATM.html">keyATM()</a></code>
function contains both quantities.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">out</span><span class="op">$</span><span class="va">theta</span>  <span class="co"># Document-topic distribution</span></span>
<span><span class="va">out</span><span class="op">$</span><span class="va">phi</span>    <span class="co"># Topic-word distribution</span></span></code></pre></div>
<p>The <strong>keyATM</strong> provides other functions to diagnose and
explore the fitted model. First, it is important to check the model
fitting. If the model is working as expected, we would observe an
increase trend for the log-likelihood and an decrease trend for the
perplexity.</p>
<p>Also the fluctuation of these values get smaller as iteration
increases. The <code><a href="../../reference/plot_modelfit.html">plot_modelfit()</a></code> function visualizes the
within sample log-likelihood and perplexity and the created figure can
be saved with the <code><a href="../../reference/save_fig.html">save_fig()</a></code> function.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fig_modelfit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/plot_modelfit.html">plot_modelfit</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span>
<span><span class="va">fig_modelfit</span></span></code></pre></div>
<p><img src="keyATM_base_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/save_fig.html">save_fig</a></span><span class="op">(</span><span class="va">fig_modelfit</span>, <span class="st">"figures/base_modelfit.pdf"</span>, width <span class="op">=</span> <span class="fl">7</span>, height <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>Furthermore, the <strong>keyATM</strong> can visualize <span class="math inline">\(\boldsymbol{\alpha}\)</span>, the prior for the
document-topic distribution, and <span class="math inline">\(\boldsymbol{\pi}\)</span>, the probability that
each topic uses keyword topic-word distribution. Values of these
parameters should also stabilize over time.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/plot_alpha.html">plot_alpha</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></code></pre></div>
<p><img src="keyATM_base_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/plot_pi.html">plot_pi</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></code></pre></div>
<p><img src="keyATM_base_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>We can use the <code><a href="../../reference/save_fig.html">save_fig()</a></code> function for both the
<code><a href="../../reference/plot_alpha.html">plot_alpha()</a></code> and the <code><a href="../../reference/plot_pi.html">plot_pi()</a></code> functions.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://shusei-e.github.io" class="external-link">Shusei Eshima</a>, <a href="https://tomoya-sasaki.github.io/" class="external-link">Tomoya Sasaki</a>, <a href="https://imai.fas.harvard.edu/" class="external-link">Kosuke Imai</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
